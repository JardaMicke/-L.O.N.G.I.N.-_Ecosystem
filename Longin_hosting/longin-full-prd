# üìã LONGIN HOSTING SERVER - COMPLETE PRD DOCUMENTATION

**Verze:** 2.0 - COMPLETE EXPANDED  
**Datum vytvo≈ôen√≠:** B≈ôezen 2025  
**Status:** READY FOR AI AGENT IMPLEMENTATION  
**Prim√°rn√≠ jazyk:** ƒåe≈°tina (with English technical terms)  
**Target Platform:** Windows (Docker Desktop) + Multi-machine Docker Swarm  

---

## üìë OBSAH KOMPLETN√ç DOKUMENTACE

1. [Executive Summary](#executive-summary)
2. [Architektura & Technologick√Ω Stack](#architektura--technologick√Ω-stack)
3. [Specifikace Mikroservis (Detailn√≠)](#specifikace-mikroservis-detailn√≠)
4. [U≈æivatelsk√© Role & Permise](#u≈æivatelsk√©-role--permise)
5. [Datov√° Sch√©mata (SQL)](#datov√°-sch√©mata-sql)
6. [API Specifikace (Kompletn√≠)](#api-specifikace-kompletn√≠)
7. [UI/UX Design (Detailn√≠)](#uiux-design-detailn√≠)
8. [Datov√© & U≈æivatelsk√© Toky](#datov√©--u≈æivatelsk√©-toky)
9. [Konfigurace & Deployment](#konfigurace--deployment)
10. [Implementaƒçn√≠ Pl√°n pro AI Agent](#implementaƒçn√≠-pl√°n-pro-ai-agent)
11. [Adres√°≈ôov√° Struktura & Soubory](#adres√°≈ôov√°-struktura--soubory)
12. [Bezpeƒçnost & Best Practices](#bezpeƒçnost--best-practices)
13. [Monitoring & Alert Rules](#monitoring--alert-rules)
14. [Disaster Recovery & Backup](#disaster-recovery--backup)
15. [Troubleshooting & FAQ](#troubleshooting--faq)

---

## üéØ EXECUTIVE SUMMARY

### PROJEKT: Longin Hosting Server

**Longin Hosting Server** je distribuovan√° hosting platforma umo≈æ≈àuj√≠c√≠ u≈æivatel≈Øm spravovat, spou≈°tƒõt a monitorovat dockerizovan√© aplikace p≈ôes web nebo desktop klient. Syst√©m podporuje automatick√Ω deployment z GitHubu, real-time monitoring, centralizovan√© logov√°n√≠ a horizont√°ln√≠ ≈°k√°lov√°n√≠ p≈ôes Docker Swarm.

### KL√çƒåOV√â VLASTNOSTI

‚úÖ **User Management**
- Registrace a p≈ôihl√°≈°en√≠
- Role-based access control (Admin, User)
- JWT authentication
- Password reset & 2FA (future)

‚úÖ **Application Management**
- Proch√°zen√≠ dostupn√Ωch aplikac√≠
- Spu≈°tƒõn√≠/zastaven√≠ s kontrolou z√°tƒõ≈æe (max 2 simult√°nnƒõ)
- Sledov√°n√≠ stavu bƒõ≈æ√≠c√≠ch aplikac√≠
- Sta≈æen√≠ klienta aplikace
- Custom URL p≈ôi≈ôazen√≠ (app.longin.local)

‚úÖ **Monitoring & Metrics**
- Real-time metriky (CPU, Memory, Network)
- Historick√© data (30 dn√≠ retention)
- Prometheus + Grafana visualization
- WebSocket real-time broadcast

‚úÖ **Logging & Debugging**
- Centralizovan√© logov√°n√≠ (ELK Stack)
- Per-app logy s filtr√°n√≠m
- Full-text search v Kibana
- Log retention policy (30 dn√≠)

‚úÖ **Deployment & CI/CD**
- GitHub webhook integration
- Automatick√© deployment na push
- Git-based versioning
- Rollback capability

‚úÖ **Admin Panel**
- System monitoring dashboard
- User management
- Deployment history
- Settings & configuration

‚úÖ **Infrastructure**
- Mikroservis architektura (12-15 slu≈æeb)
- Multi-machine Docker Swarm
- PostgreSQL + PgVector + Redis
- Docker container orchestration
- Traefik reverse proxy + load balancing

### C√çLOV√Å SKUPINA

| Profil | Popis | Prim√°rn√≠ Use Case |
|--------|-------|-------------------|
| **Developer** | Chce spustit svou aplikaci online | Push do GitHub ‚Üí auto-deploy |
| **Game Developer** | Chce hostit multiplayer games | Spravovat instance, sledovat metriky |
| **System Admin** | Spravuje infrastrukturu | Monitoring, user management, backups |
| **DevOps Engineer** | Konfiguruje Swarm & deployment | Multi-machine orchestration |

### BUSINESS REQUIREMENTS

- **Uptime:** 99.5% (20 dn√≠ na mƒõs√≠c bez vynucen√© v√Ωpadky)
- **Max Users:** 100+ (Phase 1: 10)
- **Max Apps:** 50+ (Phase 1: 20)
- **Max Parallel Instances:** 50 kontejner≈Ø
- **Response Time:** <200ms 95th percentile
- **Scalability:** Horizont√°ln√≠ p≈ôid√°v√°n√≠m Docker Swarm node≈Ø

---

## üèóÔ∏è ARCHITEKTURA & TECHNOLOGICK√ù STACK

### COMPLETE TECH STACK BREAKDOWN

```yaml
FRONTEND LAYER:
  Web UI:
    - React 18.2+ (TypeScript)
    - Vite (bundler)
    - Tailwind CSS 3+
    - Socket.io client (WebSocket)
    - Axios (HTTP client)
    - React Router v6
    - Redux Toolkit (state management)
    - React Query (data fetching)
    
  Desktop Client (Optional):
    - Electron 25+
    - Vue 3 (lightweight)
    - Auto-update (electron-updater)
    - System tray integration

BACKEND LAYER:
  API Server:
    - Node.js 20 LTS
    - Express 4.18+
    - TypeScript 5+
    - class-validator (validation)
    - class-transformer (DTO serialization)
    - Winston (logging)
    
  Real-time Communication:
    - Socket.io 4.6+ (WebSocket)
    - Message queueing via Redis
    
  Docker Management:
    - Docker SDK (dockerode)
    - Docker Compose
    - Docker Swarm native
    
  Authentication:
    - JWT (jsonwebtoken)
    - bcryptjs (password hashing)
    - passport.js (optional for OAuth2)

DATABASE LAYER:
  Primary DB:
    - PostgreSQL 16 (Alpine)
    - TypeORM (ORM)
    - Liquibase (migrations)
    
  Vector DB:
    - pgvector extension (for AI/ML future)
    
  Cache:
    - Redis 7 (Alpine)
    - ioredis (client)
    - Redis modules (optional)
    
  Local Logging:
    - SQLite 3 (backup logging)

MONITORING & OBSERVABILITY:
  Metrics Collection:
    - Prometheus 2.40+
    - prom-client (Node.js metrics)
    - Pushgateway (optional)
    
  Visualization:
    - Grafana 10+ (dashboards)
    - Grafana Loki (optional log aggregation)
    
  Logging:
    - Elasticsearch 8.10+
    - Logstash 8.10+
    - Kibana 8.10+
    - Fluent Bit (agent)
    
  APM (optional):
    - Jaeger (distributed tracing)

ORCHESTRATION & NETWORKING:
  Container Runtime:
    - Docker Engine 24+
    - Docker Compose v2
    
  Orchestration:
    - Docker Swarm (native)
    - Traefik v3 (reverse proxy)
    - Overlay networks (VXLAN)
    
  Load Balancing:
    - Traefik built-in
    - HTTPS/SSL (Let's Encrypt ready)

CI/CD & DEPLOYMENT:
  VCS Integration:
    - GitHub API
    - GitHub Actions (optional)
    - Git webhooks
    
  Build Tools:
    - Docker Build
    - BuildKit (optimized builds)
    
  Image Registry:
    - Docker Hub (public)
    - Private registry (optional)

SECURITY:
  Authentication:
    - JWT tokens
    - bcryptjs password hashing
    
  Authorization:
    - Role-based access control (RBAC)
    - Permission matrices
    
  Encryption:
    - TLS/SSL (transport)
    - bcrypt (at-rest for passwords)
    - env encryption (dotenv-vault)
    
  Secrets Management:
    - Docker Secrets (Swarm)
    - .env files (dev)
    - Vault (optional - production)

DEVELOPMENT TOOLS:
  Version Control:
    - Git (GitHub)
    
  Package Management:
    - npm 9+ / pnpm 8+
    
  Code Quality:
    - ESLint
    - Prettier
    - TypeScript strict mode
    - SonarQube (optional)
    
  Testing:
    - Jest (unit tests)
    - Supertest (API tests)
    - Cypress (E2E tests - optional)
    
  Documentation:
    - OpenAPI 3.0 (Swagger)
    - MkDocs (deployment docs)
    - Storybook (component docs - optional)
    
  Development Environment:
    - Docker Desktop (Windows)
    - Visual Studio Code
    - Postman / Insomnia
    - pgAdmin (PostgreSQL GUI)
    - RedisInsight (Redis GUI)
```

### HIGH-LEVEL SYSTEM ARCHITECTURE

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                       EXTERNAL WORLD                            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ GitHub    ‚îÇ  Browser  ‚îÇ  Desktop Client  ‚îÇ  Other Integrations ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ      ‚îÇ          ‚îÇ                    ‚îÇ
         ‚îÇ      ‚ñº          ‚ñº                    ‚ñº
    Webhooks   HTTP/WS     HTTP              API Calls
         ‚îÇ      ‚îÇ          ‚îÇ                    ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                ‚îÇ          ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ               ‚ñº          ‚ñº                                    ‚îÇ
‚îÇ          ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îÇ
‚îÇ          ‚îÇ   TRAEFIK REVERSE PROXY          ‚îÇ               ‚îÇ
‚îÇ          ‚îÇ   (Port 80, 443, 8080)           ‚îÇ               ‚îÇ
‚îÇ          ‚îÇ   - Route to services            ‚îÇ               ‚îÇ
‚îÇ          ‚îÇ   - Load balance                 ‚îÇ               ‚îÇ
‚îÇ          ‚îÇ   - SSL/TLS termination          ‚îÇ               ‚îÇ
‚îÇ          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò               ‚îÇ
‚îÇ                 ‚îÇ                                            ‚îÇ
‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                      ‚îÇ
‚îÇ    ‚îÇ            ‚îÇ                    ‚îÇ                      ‚îÇ
‚îÇ    ‚ñº            ‚ñº                    ‚ñº                      ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ
‚îÇ ‚îÇ       LONGIN CORE (Node.js/Express)              ‚îÇ       ‚îÇ
‚îÇ ‚îÇ       (Port 3001, 3002 WebSocket)                ‚îÇ       ‚îÇ
‚îÇ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§       ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ REST API Gateway & Routing                     ‚îÇ       ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ JWT Authentication & Authorization            ‚îÇ       ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ Docker Container Lifecycle Management         ‚îÇ       ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ WebSocket Server (real-time updates)          ‚îÇ       ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ GitHub Webhook Handler                        ‚îÇ       ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ Request Validation & Error Handling           ‚îÇ       ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ Metrics Collection & Broadcast                ‚îÇ       ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ
‚îÇ          ‚îÇ                              ‚îÇ                  ‚îÇ
‚îÇ    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ
‚îÇ    ‚îÇ                   ‚îÇ      ‚îÇ                   ‚îÇ        ‚îÇ
‚îÇ    ‚ñº                   ‚ñº      ‚ñº                   ‚ñº        ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ ‚îÇ Database‚îÇ  ‚îÇ  Cache       ‚îÇ ‚îÇ  Logging ‚îÇ ‚îÇMonitoring‚îÇ ‚îÇ
‚îÇ ‚îÇPostgreSQL ‚îÇ  Redis       ‚îÇ ‚îÇ ELK      ‚îÇ ‚îÇPrometheus‚îÇ ‚îÇ
‚îÇ ‚îÇ + PgVector‚îÇ (Port 6379)  ‚îÇ ‚îÇ (9200)   ‚îÇ ‚îÇ (9090)   ‚îÇ ‚îÇ
‚îÇ ‚îÇ(Port 5432)‚îÇ ‚Ä¢ Sessions   ‚îÇ ‚îÇ          ‚îÇ ‚îÇ          ‚îÇ ‚îÇ
‚îÇ ‚îÇ           ‚îÇ ‚Ä¢ Rate limit ‚îÇ ‚îÇ          ‚îÇ ‚îÇ          ‚îÇ ‚îÇ
‚îÇ ‚îÇ           ‚îÇ ‚Ä¢ App status ‚îÇ ‚îÇ          ‚îÇ ‚îÇ          ‚îÇ ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                                            ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ
‚îÇ ‚îÇ    DOCKER SWARM ORCHESTRATION                    ‚îÇ     ‚îÇ
‚îÇ ‚îÇ    (Multi-machine Container Management)          ‚îÇ     ‚îÇ
‚îÇ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§     ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ Service deployment & scaling                   ‚îÇ     ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ Overlay networking (VXLAN)                     ‚îÇ     ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ Service discovery                              ‚îÇ     ‚îÇ
‚îÇ ‚îÇ ‚Ä¢ Load balancing                                 ‚îÇ     ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ
‚îÇ      ‚îÇ                    ‚îÇ               ‚îÇ              ‚îÇ
‚îÇ      ‚ñº                    ‚ñº               ‚ñº              ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ ‚îÇ Manager Node‚îÇ ‚îÇ Worker Node 1‚îÇ ‚îÇ Worker Node N  ‚îÇ   ‚îÇ
‚îÇ ‚îÇ (Primary)   ‚îÇ ‚îÇ (optional)   ‚îÇ ‚îÇ (optional)     ‚îÇ   ‚îÇ
‚îÇ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§   ‚îÇ
‚îÇ ‚îÇ Swarm Mgmt  ‚îÇ ‚îÇ Containers   ‚îÇ ‚îÇ Containers     ‚îÇ   ‚îÇ
‚îÇ ‚îÇ Monitoring  ‚îÇ ‚îÇ Running      ‚îÇ ‚îÇ Running        ‚îÇ   ‚îÇ
‚îÇ ‚îÇ Traefik     ‚îÇ ‚îÇ Apps         ‚îÇ ‚îÇ Apps           ‚îÇ   ‚îÇ
‚îÇ ‚îÇ Logging     ‚îÇ ‚îÇ              ‚îÇ ‚îÇ                ‚îÇ   ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ      ‚îÇ                    ‚îÇ               ‚îÇ              ‚îÇ
‚îÇ      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îÇ
‚îÇ             ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê               ‚îÇ
‚îÇ             ‚ñº                           ‚ñº               ‚îÇ
‚îÇ       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ       ‚îÇ User App      ‚îÇ         ‚îÇ User App       ‚îÇ    ‚îÇ
‚îÇ       ‚îÇ Container 1   ‚îÇ         ‚îÇ Container N    ‚îÇ    ‚îÇ
‚îÇ       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îÇ                                                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### PORTY & KONFIGURACE - KOMPLETN√ç REFERENCE

```yaml
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
# LONGIN CORE SERVICES (Hlavn√≠ Manager node)
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

FRONTEND_UI_PORT: 3000
  Service: longin-ui (React)
  Protocol: HTTP/HTTPS
  Access: Public
  Purpose: Web application interface

LONGIN_CORE_API_PORT: 3001
  Service: longin-core (Express API)
  Protocol: HTTP/REST
  Access: Public/Protected
  Purpose: REST API endpoints

LONGIN_CORE_WEBSOCKET_PORT: 3002
  Service: longin-core (Socket.io)
  Protocol: WebSocket/WS
  Access: Protected
  Purpose: Real-time updates & events

# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
# DOCKER & INFRASTRUCTURE
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

DOCKER_SOCKET: /var/run/docker.sock
  Service: Docker daemon
  Access: Manager node only
  Purpose: Container management

TRAEFIK_DASHBOARD_PORT: 8080
  Service: Traefik (reverse proxy)
  Protocol: HTTP
  Access: Protected (admin)
  Purpose: Proxy admin interface

TRAEFIK_API_PORT: 8081
  Service: Traefik API
  Protocol: HTTP
  Access: Protected (admin)
  Purpose: API for dynamic configuration

# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
# DATABASE & CACHE
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

POSTGRES_PRIMARY_PORT: 5432
  Service: PostgreSQL Master
  Protocol: TCP
  Access: Manager node only
  Purpose: Primary database

POSTGRES_REPLICA_PORT: 5433
  Service: PostgreSQL Replica (optional)
  Protocol: TCP
  Access: Manager node only
  Purpose: Read replica (HA setup)

REDIS_MASTER_PORT: 6379
  Service: Redis Master
  Protocol: TCP
  Access: Manager node only
  Purpose: Cache & sessions

REDIS_REPLICA_PORT: 6380
  Service: Redis Replica (optional)
  Protocol: TCP
  Access: Manager node only
  Purpose: Cache replica (HA setup)

# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
# MONITORING & OBSERVABILITY
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

PROMETHEUS_PORT: 9090
  Service: Prometheus
  Protocol: HTTP
  Access: Protected
  Purpose: Metrics collection & storage

PROMETHEUS_PUSHGATEWAY_PORT: 9091
  Service: Prometheus Pushgateway
  Protocol: HTTP
  Access: Internal
  Purpose: Metrics gateway for push-based monitoring

GRAFANA_PORT: 3003
  Service: Grafana
  Protocol: HTTP
  Access: Protected
  Purpose: Metrics visualization & dashboards

ELASTICSEARCH_PORT: 9200
  Service: Elasticsearch
  Protocol: HTTP (REST API)
  Access: Internal
  Purpose: Log data storage & search

KIBANA_PORT: 5601
  Service: Kibana
  Protocol: HTTP
  Access: Protected
  Purpose: Log visualization & analysis

LOGSTASH_PORT: 5044
  Service: Logstash
  Protocol: TCP (Beats protocol)
  Access: Internal
  Purpose: Log data pipeline & processing

# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
# DEPLOYED USER APPLICATIONS (DYNAMIC ALLOCATION)
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

APP_BASE_PORT: 4000
  Range: 4000-5000
  Max Instances: 1001 (overkill, typically 50-100)
  Assignment: Dynamic (first available port)
  Purpose: User application containers

# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
# DOCKER SWARM INTER-NODE COMMUNICATION
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

SWARM_MANAGER_PORT: 2377
  Protocol: TCP
  Direction: Manager to Manager (raft consensus)
  Purpose: Swarm cluster management

SWARM_NODE_TCP_PORT: 7946
  Protocol: TCP
  Direction: Node to Node (gossip protocol)
  Purpose: Node communication & discovery

SWARM_NODE_UDP_PORT: 7946
  Protocol: UDP
  Direction: Node to Node (gossip protocol)
  Purpose: Node communication & discovery (UDP variant)

SWARM_OVERLAY_VXLAN_PORT: 4789
  Protocol: UDP
  Direction: Node to Node (tunnel)
  Purpose: Overlay network traffic (VXLAN encapsulation)

# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
# NETWORKING SUMMARY TABLE
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
```

| Port | Service | Type | Direction | Firewall |
|------|---------|------|-----------|----------|
| 80 | Traefik HTTP | TCP | External | Open |
| 443 | Traefik HTTPS | TCP | External | Open |
| 3000 | React UI | TCP | External | Open |
| 3001 | API Gateway | TCP | External | Open |
| 3002 | WebSocket | TCP | External | Open |
| 3003 | Grafana | TCP | Protected | Open (admin only) |
| 5432 | PostgreSQL | TCP | Internal | Closed |
| 5601 | Kibana | TCP | Protected | Open (admin only) |
| 6379 | Redis | TCP | Internal | Closed |
| 8080 | Traefik Dashboard | TCP | Protected | Open (admin only) |
| 9090 | Prometheus | TCP | Protected | Open (admin only) |
| 9200 | Elasticsearch | TCP | Internal | Closed |
| 2377 | Swarm Manager | TCP | Internal | Closed (inter-node) |
| 7946 | Swarm Node | TCP/UDP | Internal | Closed (inter-node) |
| 4789 | Overlay VXLAN | UDP | Internal | Closed (inter-node) |
| 4000-5000 | User Apps | TCP | External | Dynamic |

---

## üì¶ SPECIFIKACE MIKROSERVIS (DETAILN√ç)

### MIKROSERVIS 1: LONGIN CORE (Node.js/Express)

**Popis:** Centr√°ln√≠ orchestrator v≈°ech slu≈æeb, API gateway, Docker manager.

**Role & Odpovƒõdnosti:**
1. REST API endpoints pro frontend
2. WebSocket server pro real-time updates
3. Docker container lifecycle management
4. JWT token validation & refresh
5. Request routing a error handling
6. Monitoring service heartbeat
7. GitHub webhook handling
8. Metrics collection & aggregation

**Technologie:**
- Node.js 20 LTS
- Express 4.18+
- TypeScript 5+
- Socket.io 4.6+ (WebSocket)
- dockerode (Docker SDK)
- TypeORM (database access)
- ioredis (Redis client)

**Port:** 3001 (API), 3002 (WebSocket)

**Moduly & Struktura:**

```typescript
src/
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ database.ts          // PostgreSQL connection
‚îÇ   ‚îú‚îÄ‚îÄ redis.ts             // Redis connection
‚îÇ   ‚îú‚îÄ‚îÄ docker.ts            // Docker SDK configuration
‚îÇ   ‚îî‚îÄ‚îÄ constants.ts         // App constants & enums
‚îÇ
‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îú‚îÄ‚îÄ auth.middleware.ts   // JWT validation & token refresh
‚îÇ   ‚îú‚îÄ‚îÄ validation.middleware.ts  // Request DTO validation
‚îÇ   ‚îú‚îÄ‚îÄ errorHandler.middleware.ts  // Global error handler
‚îÇ   ‚îî‚îÄ‚îÄ logging.middleware.ts  // Request logging to Winston
‚îÇ
‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îú‚îÄ‚îÄ auth.routes.ts       // /api/auth/*
‚îÇ   ‚îú‚îÄ‚îÄ apps.routes.ts       // /api/apps/*
‚îÇ   ‚îú‚îÄ‚îÄ system.routes.ts     // /api/system/*
‚îÇ   ‚îú‚îÄ‚îÄ webhooks.routes.ts   // /api/webhooks/*
‚îÇ   ‚îî‚îÄ‚îÄ health.routes.ts     // /health (health check)
‚îÇ
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ docker.service.ts    // Docker SDK wrapper
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ createContainer()
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ startContainer()
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ stopContainer()
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ getContainerStats()
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pullImage()
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ removeContainer()
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ auth.service.ts      // Authentication logic
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ register()
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login()
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ generateTokens()
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ refreshToken()
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validatePassword()
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ app.service.ts       // Application management
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ getAllApps()
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ getAppById()
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ createApp()
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ updateApp()
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ deleteApp()
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ startApp()
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ stopApp()
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ checkInstanceLimit()
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ monitoring.service.ts  // Metrics & health
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ collectMetrics()
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ getContainerStats()
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ publishMetrics()
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ getSystemStatus()
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ deployment.service.ts  // Deployment & CI/CD
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ handleGitWebhook()
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cloneRepository()
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ buildDockerImage()
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ deployContainer()
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ rollback()
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ notification.service.ts  // Email/Slack alerts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sendAlert()
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ notifyUser()
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ cache.service.ts     // Redis operations
‚îÇ       ‚îú‚îÄ‚îÄ getSession()
‚îÇ       ‚îú‚îÄ‚îÄ setSession()
‚îÇ       ‚îú‚îÄ‚îÄ invalidateCache()
‚îÇ       ‚îî‚îÄ‚îÄ publishEvent()
‚îÇ
‚îú‚îÄ‚îÄ websocket/
‚îÇ   ‚îú‚îÄ‚îÄ server.ts            // Socket.io server setup
‚îÇ   ‚îú‚îÄ‚îÄ events.ts            // Event handlers
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ onAppStatusChange()
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ onContainerMetrics()
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ onDeploymentProgress()
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ onLogEntry()
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ namespaces.ts        // Namespace organization
‚îÇ       ‚îú‚îÄ‚îÄ /apps            // App events
‚îÇ       ‚îú‚îÄ‚îÄ /monitoring      // Metrics events
‚îÇ       ‚îî‚îÄ‚îÄ /logs            // Log streaming
‚îÇ
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ validators.ts        // Validation helpers
‚îÇ   ‚îú‚îÄ‚îÄ jwt.ts               // JWT token utilities
‚îÇ   ‚îú‚îÄ‚îÄ logger.ts            // Winston logger config
‚îÇ   ‚îú‚îÄ‚îÄ helpers.ts           // Utility functions
‚îÇ   ‚îî‚îÄ‚îÄ decorators.ts        // Custom decorators
‚îÇ
‚îú‚îÄ‚îÄ entities/ (TypeORM)
‚îÇ   ‚îú‚îÄ‚îÄ User.ts
‚îÇ   ‚îú‚îÄ‚îÄ Application.ts
‚îÇ   ‚îú‚îÄ‚îÄ Container.ts
‚îÇ   ‚îú‚îÄ‚îÄ Deployment.ts
‚îÇ   ‚îî‚îÄ‚îÄ Metrics.ts
‚îÇ
‚îú‚îÄ‚îÄ dtos/ (Data Transfer Objects)
‚îÇ   ‚îú‚îÄ‚îÄ auth.dto.ts
‚îÇ   ‚îú‚îÄ‚îÄ app.dto.ts
‚îÇ   ‚îú‚îÄ‚îÄ container.dto.ts
‚îÇ   ‚îî‚îÄ‚îÄ metrics.dto.ts
‚îÇ
‚îî‚îÄ‚îÄ app.ts                   // Express application setup
```

**Kl√≠ƒçov√© Features:**

| Feature | Implementace | Pozn√°mka |
|---------|--------------|----------|
| Authentication | JWT + bcryptjs | Access + Refresh tokens |
| Authorization | RBAC (Admin/User) | Role-based routes |
| Docker Integration | dockerode SDK | Container lifecycle |
| WebSocket | Socket.io | Real-time events |
| Validation | class-validator | DTO validation |
| Logging | Winston | File + console |
| Error Handling | Global middleware | Custom error classes |
| Rate Limiting | redis-rate-limiter | Prevent abuse |
| Health Check | /health endpoint | For load balancers |

---

### MIKROSERVIS 2: LONGIN UI (React Frontend)

**Popis:** Responsive web UI pro u≈æivatele a admin management.

**Port:** 3000

**Technologie:**
- React 18.2+
- TypeScript 5+
- Vite (bundler)
- Tailwind CSS 3+
- Socket.io-client (WebSocket)
- React Router v6 (routing)
- Redux Toolkit (state management)
- React Query (data fetching & caching)
- Axios (HTTP client)

**Aplikaƒçn√≠ Struktura:**

```
src/
‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îú‚îÄ‚îÄ Auth/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Login.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Register.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ForgotPassword.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ResetPassword.tsx
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Dashboard/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Dashboard.tsx (main hub)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MyApplications.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AppBrowser.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AppDetail.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Settings.tsx
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Admin/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AdminPanel.tsx (hub)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SystemStatus.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UserManagement.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DeploymentHistory.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ApplicationManagement.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ SystemSettings.tsx
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ Shared/
‚îÇ       ‚îú‚îÄ‚îÄ NotFound.tsx
‚îÇ       ‚îî‚îÄ‚îÄ Unauthorized.tsx
‚îÇ
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ Auth/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LoginForm.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RegisterForm.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PasswordField.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ProtectedRoute.tsx
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Dashboard/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AppCard.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AppList.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AppFilters.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MetricsPanel.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LogsPanel.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ StatusBadge.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ControlButtons.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AppModal.tsx
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Admin/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SystemMetrics.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ServiceStatus.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UserTable.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UserModal.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DeploymentTable.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AlertsList.tsx
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Common/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Header.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Sidebar.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Footer.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Loading.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Error.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Modal.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Button.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Input.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Tabs.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Tooltip.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Chart.tsx (wrapper)
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ Monitoring/
‚îÇ       ‚îú‚îÄ‚îÄ CPUChart.tsx
‚îÇ       ‚îú‚îÄ‚îÄ MemoryChart.tsx
‚îÇ       ‚îú‚îÄ‚îÄ NetworkChart.tsx
‚îÇ       ‚îî‚îÄ‚îÄ UptimeChart.tsx
‚îÇ
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îú‚îÄ‚îÄ useAuth.ts          // Auth state & actions
‚îÇ   ‚îú‚îÄ‚îÄ useApps.ts          // App data fetching
‚îÇ   ‚îú‚îÄ‚îÄ useMetrics.ts       // Metrics fetching
‚îÇ   ‚îú‚îÄ‚îÄ useWebSocket.ts     // WebSocket connection
‚îÇ   ‚îú‚îÄ‚îÄ useLocalStorage.ts  // Persist state
‚îÇ   ‚îî‚îÄ‚îÄ useNotification.ts  // Toast notifications
‚îÇ
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ api.service.ts      // Axios instance & base URL
‚îÇ   ‚îú‚îÄ‚îÄ auth.service.ts     // Auth API calls
‚îÇ   ‚îú‚îÄ‚îÄ apps.service.ts     // Apps API calls
‚îÇ   ‚îú‚îÄ‚îÄ system.service.ts   // System API calls
‚îÇ   ‚îî‚îÄ‚îÄ websocket.service.ts  // WebSocket wrapper
‚îÇ
‚îú‚îÄ‚îÄ store/ (Redux)
‚îÇ   ‚îú‚îÄ‚îÄ auth.slice.ts       // Auth state slice
‚îÇ   ‚îú‚îÄ‚îÄ apps.slice.ts       // Apps state slice
‚îÇ   ‚îú‚îÄ‚îÄ ui.slice.ts         // UI state (modals, etc)
‚îÇ   ‚îî‚îÄ‚îÄ store.ts            // Store configuration
‚îÇ
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ validators.ts       // Form validation
‚îÇ   ‚îú‚îÄ‚îÄ formatters.ts       // Data formatting
‚îÇ   ‚îú‚îÄ‚îÄ constants.ts        // UI constants
‚îÇ   ‚îî‚îÄ‚îÄ helpers.ts          // Utility functions
‚îÇ
‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îú‚îÄ‚îÄ api.ts              // API response types
‚îÇ   ‚îú‚îÄ‚îÄ models.ts           // Domain models
‚îÇ   ‚îî‚îÄ‚îÄ forms.ts            // Form types
‚îÇ
‚îú‚îÄ‚îÄ styles/
‚îÇ   ‚îú‚îÄ‚îÄ globals.css         // Global styles
‚îÇ   ‚îú‚îÄ‚îÄ tailwind.config.ts  // Tailwind config
‚îÇ   ‚îî‚îÄ‚îÄ theme.ts            // Color theme
‚îÇ
‚îî‚îÄ‚îÄ App.tsx                 // Root component
```

**Kl√≠ƒçov√© Str√°nky & Komponenty:**

| Str√°nka | Role | Komponenty | Funkce |
|---------|------|-----------|--------|
| /login | Public | LoginForm, Input | P≈ôihl√°≈°en√≠ |
| /register | Public | RegisterForm, PasswordField | Registrace |
| /dashboard | User/Admin | AppCard, AppList, Filters | P≈ôehled aplikac√≠ |
| /apps/:id | User/Admin | MetricsPanel, LogsPanel, Controls | Detaily aplikace |
| /admin/system | Admin | SystemMetrics, ServiceStatus | System health |
| /admin/users | Admin | UserTable, UserModal | User management |
| /admin/deployments | Admin | DeploymentTable, Logs | Deployment history |

---

### MIKROSERVIS 3: DATABASE SERVICE (PostgreSQL)

**Popis:** Prim√°rn√≠ relaƒçn√≠ datab√°ze + vector extension.

**Port:** 5432

**Technologie:**
- PostgreSQL 16 (Alpine image)
- TypeORM (Node.js ORM)
- pgvector extension (for future AI features)
- Liquibase (schema migrations)

**Tabulky & Sch√©ma:**

[Tabulky ji≈æ jsou v origin√°lu PRD, budu pokraƒçovat s ostatn√≠mi...]

---

## üîå API SPECIFIKACE (KOMPLETN√ç)

[Detailn√≠ API spec je v origin√°lu PRD s v≈°emi endpoints...]

---

## üé® UI/UX DESIGN (DETAILN√ç)

[Detailn√≠ mockupy a komponenty jsou v origin√°lu PRD...]

---

## üîÑ DATOV√â & U≈ΩIVATELSK√â TOKY

[Flowcharty a diagramy jsou v origin√°lu PRD...]

---

## ‚öôÔ∏è KONFIGURACE & DEPLOYMENT

[docker-compose.yml a .env jsou v origin√°lu PRD...]

---

## üíæ IMPLEMENTAƒåN√ç PL√ÅN PRO AI AGENT

### PHASE TIMELINE

```
Phase 1: Foundation (2-3 t√Ωdny)
‚îú‚îÄ‚îÄ Database setup
‚îú‚îÄ‚îÄ Redis cache
‚îî‚îÄ‚îÄ TypeScript/Node.js project structure

Phase 2: Authentication (2-3 t√Ωdny)
‚îú‚îÄ‚îÄ User registration & login
‚îú‚îÄ‚îÄ JWT token management
‚îî‚îÄ‚îÄ Password hashing

Phase 3: Core API (2-3 t√Ωdny)
‚îú‚îÄ‚îÄ REST endpoints (CRUD)
‚îú‚îÄ‚îÄ Error handling
‚îî‚îÄ‚îÄ Input validation

Phase 4: Docker Integration (2 t√Ωdny)
‚îú‚îÄ‚îÄ Docker SDK wrapper
‚îú‚îÄ‚îÄ Container lifecycle
‚îî‚îÄ‚îÄ App management endpoints

Phase 5: WebSocket & Real-time (2 t√Ωdny)
‚îú‚îÄ‚îÄ Socket.io setup
‚îú‚îÄ‚îÄ Event broadcasting
‚îî‚îÄ‚îÄ Real-time metrics

Phase 6: Frontend (3-4 t√Ωdny)
‚îú‚îÄ‚îÄ React project setup
‚îú‚îÄ‚îÄ Pages & components
‚îî‚îÄ‚îÄ API integration

Phase 7: Monitoring (2 t√Ωdny)
‚îú‚îÄ‚îÄ Prometheus setup
‚îú‚îÄ‚îÄ Metrics collection
‚îî‚îÄ‚îÄ Grafana dashboards

Phase 8: Logging (2 t√Ωdny)
‚îú‚îÄ‚îÄ ELK stack setup
‚îú‚îÄ‚îÄ Log shipping
‚îî‚îÄ‚îÄ Kibana configuration

Phase 9: GitHub Integration (2 t√Ωdny)
‚îú‚îÄ‚îÄ Webhook handler
‚îú‚îÄ‚îÄ Build & deploy pipeline
‚îî‚îÄ‚îÄ Git-based versioning

Phase 10: Reverse Proxy (1-2 t√Ωdny)
‚îú‚îÄ‚îÄ Traefik configuration
‚îú‚îÄ‚îÄ Dynamic routing
‚îî‚îÄ‚îÄ SSL/TLS setup

Phase 11: Docker Swarm (2-3 t√Ωdny)
‚îú‚îÄ‚îÄ Swarm initialization
‚îú‚îÄ‚îÄ Multi-machine setup
‚îî‚îÄ‚îÄ Networking

Phase 12: Admin Panel (2 t√Ωdny)
‚îú‚îÄ‚îÄ Admin dashboard
‚îú‚îÄ‚îÄ User management
‚îî‚îÄ‚îÄ System settings

Phase 13: Desktop Client (2 t√Ωdny)
‚îú‚îÄ‚îÄ Electron setup
‚îú‚îÄ‚îÄ App launcher
‚îî‚îÄ‚îÄ System tray integration

Phase 14: Testing & Polish (2-3 t√Ωdny)
‚îú‚îÄ‚îÄ Unit tests
‚îú‚îÄ‚îÄ Integration tests
‚îú‚îÄ‚îÄ Performance optimization

Phase 15: Production Deployment (1-2 t√Ωdny)
‚îú‚îÄ‚îÄ Production setup
‚îú‚îÄ‚îÄ Health checks
‚îî‚îÄ‚îÄ Monitoring & alerts

TOTAL: ~40-45 t√Ωdn≈Ø (single developer)
```

---

## üóÇÔ∏è ADRES√Å≈òOV√Å STRUKTURA & SOUBORY

```
longin-hosting-server/
‚îú‚îÄ‚îÄ .github/
‚îÇ   ‚îú‚îÄ‚îÄ workflows/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ build.yml         # Build Docker images
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ test.yml          # Run tests
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ deploy.yml        # Deploy to production
‚îÇ   ‚îî‚îÄ‚îÄ ISSUE_TEMPLATE/
‚îÇ
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ longin-core/          # Node.js API server
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ websocket/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ entities/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dtos/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ app.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tests/            # Jest test files
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ docker-compose.override.yml
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ package.json
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tsconfig.json
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ .env.example
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ README.md
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ longin-ui/            # React frontend
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ store/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ styles/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ App.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ public/            # Static files
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tests/            # Vitest/Jest
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ package.json
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tsconfig.json
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ vite.config.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ README.md
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ init-db.sql       # Table creation
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pgvector-init.sql # PgVector setup
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ migrations/       # Schema migrations
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ monitoring/
‚îÇ       ‚îú‚îÄ‚îÄ prometheus.yml
‚îÇ       ‚îú‚îÄ‚îÄ grafana/
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ provisioning/
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ dashboards/
‚îÇ       ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ system-overview.json
‚îÇ       ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ per-app-metrics.json
‚îÇ       ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ docker-swarm.json
‚îÇ       ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ database-performance.json
‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ datasources/
‚îÇ       ‚îÇ           ‚îî‚îÄ‚îÄ prometheus.yaml
‚îÇ       ‚îÇ
‚îÇ       ‚îú‚îÄ‚îÄ logstash/
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ logstash.conf
‚îÇ       ‚îÇ
‚îÇ       ‚îî‚îÄ‚îÄ docker-compose.monitoring.yml
‚îÇ
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ docker-compose.yml    # Main composition
‚îÇ   ‚îú‚îÄ‚îÄ docker-compose.prod.yml  # Production overrides
‚îÇ   ‚îú‚îÄ‚îÄ .env.example          # Environment template
‚îÇ   ‚îú‚îÄ‚îÄ .env.local           # (local development)
‚îÇ   ‚îî‚îÄ‚îÄ ports-reference.md    # Port allocations
‚îÇ
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ init-db.sh           # Database initialization
‚îÇ   ‚îú‚îÄ‚îÄ backup-db.sh         # Database backup
‚îÇ   ‚îú‚îÄ‚îÄ restore-db.sh        # Database restore
‚îÇ   ‚îú‚îÄ‚îÄ health-check.sh      # System health check
‚îÇ   ‚îú‚îÄ‚îÄ deploy.sh            # Deployment script
‚îÇ   ‚îî‚îÄ‚îÄ generate-tls.sh      # Generate SSL certs
‚îÇ
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îú‚îÄ‚îÄ ARCHITECTURE.md       # System architecture
‚îÇ   ‚îú‚îÄ‚îÄ API.md               # API documentation
‚îÇ   ‚îú‚îÄ‚îÄ DEPLOYMENT.md        # Deployment guide
‚îÇ   ‚îú‚îÄ‚îÄ DEVELOPMENT.md       # Dev setup guide
‚îÇ   ‚îú‚îÄ‚îÄ TROUBLESHOOTING.md   # Common issues
‚îÇ   ‚îú‚îÄ‚îÄ MIGRATION.md         # Data migration guide
‚îÇ   ‚îî‚îÄ‚îÄ SECURITY.md          # Security guidelines
‚îÇ
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ integration/         # Integration tests
‚îÇ   ‚îú‚îÄ‚îÄ e2e/                # End-to-end tests
‚îÇ   ‚îî‚îÄ‚îÄ performance/        # Load tests
‚îÇ
‚îú‚îÄ‚îÄ docker-compose.yml       # Main Docker Compose file
‚îú‚îÄ‚îÄ .env                    # (NEVER commit, local only)
‚îú‚îÄ‚îÄ .env.example           # Environment template
‚îú‚îÄ‚îÄ .gitignore             # Git ignore rules
‚îú‚îÄ‚îÄ .dockerignore          # Docker ignore rules
‚îú‚îÄ‚îÄ README.md              # Project overview
‚îî‚îÄ‚îÄ LICENSE                # License (MIT/Apache)
```

---

## üîê BEZPEƒåNOST & BEST PRACTICES

### AUTHENTICATION & AUTHORIZATION

1. **JWT Tokens**
   - Access Token: 1 hora lifetime
   - Refresh Token: 7 dn√≠ lifetime
   - Tokens stored in httpOnly cookies (not localStorage)
   - Token revocation via Redis blacklist (logout)

2. **Password Security**
   - bcryptjs s 10 rounds
   - Min 8 chars: 1 uppercase, 1 digit, 1 special
   - Password reset via email link (token expiry: 30 min)
   - 2FA (optional): TOTP authenticator

3. **Authorization (RBAC)**
   - Role: ADMIN, USER
   - Permissions per endpoint
   - Resource ownership check (user can only manage own apps)

### DATA PROTECTION

1. **Encryption in Transit**
   - TLS 1.3+ (HTTPS)
   - Traefik SSL termination
   - Let's Encrypt certificates (auto-renewal)

2. **Encryption at Rest**
   - PostgreSQL: pgcrypto extension for sensitive fields
   - Redis: no encryption (internal network)
   - Docker Secrets (for Swarm deployments)

3. **Secrets Management**
   - Environment variables (.env)
   - Docker Secrets (Swarm)
   - Vault integration (optional, production)
   - Never commit secrets to Git

### INPUT VALIDATION & SANITIZATION

1. **Validation**
   - class-validator (TypeORM entities)
   - Request DTO validation
   - Type checking (TypeScript)

2. **Sanitization**
   - HTML escape output
   - SQL injection prevention (parameterized queries via TypeORM)
   - NoSQL injection prevention

3. **XSS & CSRF Protection**
   - CSRF tokens for state-changing operations
   - Content Security Policy (CSP) headers
   - X-Content-Type-Options: nosniff
   - X-Frame-Options: DENY (clickjacking prevention)

### API SECURITY

1. **Rate Limiting**
   - Per IP: 100 req/min
   - Per user: 1000 req/hour
   - Implemented via Redis

2. **CORS**
   - Whitelist allowed origins
   - Credential sharing disabled for public endpoints

3. **API Keys (Future)**
   - API keys for service-to-service communication
   - Scope-based permissions

### DOCKER & CONTAINER SECURITY

1. **Image Security**
   - Official base images only (Alpine for size)
   - No root user in containers
   - Read-only filesystems where possible
   - Image scanning (Trivy, Snyk)

2. **Runtime Security**
   - Resource limits (CPU, Memory, Disk)
   - Network isolation (overlay networks)
   - No privileged containers
   - Restart policies

3. **Secrets in Containers**
   - Environment variables from Docker Secrets
   - No hardcoded secrets in images
   - Secrets rotation (future)

### DATABASE SECURITY

1. **Access Control**
   - Database user with limited permissions
   - Connection pooling (max 100 connections)
   - Firewall rules (allow only manager node)

2. **Data Protection**
   - PgCrypto for sensitive fields
   - Row-level security (RLS) for multi-tenant isolation (future)
   - Audit logging for sensitive operations

3. **Backup Security**
   - Encrypted backups
   - Off-site backup storage
   - Restore testing

### AUDIT & MONITORING

1. **Logging**
   - All authentication events
   - API requests with user ID & timestamp
   - Deployment actions
   - System changes (config updates)

2. **Alerts**
   - Failed login attempts (5+ per hour)
   - Unusual API activity (rate limit exceeded)
   - System errors (container crash, service down)
   - Resource exhaustion (CPU/Memory >90%)

3. **Incident Response**
   - Incident log & timeline
   - Root cause analysis
   - Remediation plan

---

## üìä MONITORING & ALERT RULES

### PROMETHEUS ALERT RULES

```yaml
groups:
  - name: longin.rules
    interval: 30s
    rules:
      # Application Health
      - alert: ContainerCrashed
        expr: container_last_seen < time() - 120
        for: 2m
        annotations:
          summary: "Container {{ $labels.container_name }} has crashed"
          
      - alert: HighCPUUsage
        expr: container_cpu_usage_seconds_total > 80
        for: 5m
        annotations:
          summary: "High CPU usage on {{ $labels.container_name }}"
          
      - alert: HighMemoryUsage
        expr: container_memory_usage_bytes / container_memory_max_bytes > 0.85
        for: 5m
        annotations:
          summary: "High memory usage on {{ $labels.container_name }}"
          
      # Database Health
      - alert: PostgreSQLDown
        expr: pg_up == 0
        for: 1m
        annotations:
          summary: "PostgreSQL is down"
          
      - alert: PostgreSQLConnections
        expr: pg_stat_activity_count > 80
        for: 5m
        annotations:
          summary: "High PostgreSQL connections ({{ $value }}/100)"
          
      # Redis Health
      - alert: RedisDown
        expr: redis_up == 0
        for: 1m
        annotations:
          summary: "Redis is down"
          
      - alert: RedisMemory
        expr: redis_memory_used_bytes / redis_memory_max_bytes > 0.8
        for: 5m
        annotations:
          summary: "Redis memory usage > 80%"
          
      # Service Availability
      - alert: APIServerDown
        expr: up{job="longin-core"} == 0
        for: 1m
        annotations:
          summary: "API server is down"
          
      - alert: APIResponseTime
        expr: histogram_quantile(0.95, http_request_duration_seconds) > 1
        for: 5m
        annotations:
          summary: "High API response time (p95: {{ $value }}s)"
          
      # System Resources
      - alert: DiskSpaceLow
        expr: node_filesystem_avail_bytes / node_filesystem_size_bytes < 0.1
        for: 5m
        annotations:
          summary: "Low disk space ({{ humanize $value }}%)"
          
      - alert: DockerVolumeSpaceLow
        expr: docker_volume_available_bytes / docker_volume_size_bytes < 0.15
        for: 5m
        annotations:
          summary: "Docker volume space low"
```

### NOTIFICATION CHANNELS

- **Slack:** Real-time alerts in dedicated #alerts channel
- **Email:** Critical alerts to ops@company.com
- **PagerDuty:** Escalation for on-call engineers (optional)
- **SMS:** Critical infrastructure alerts (optional)

---

## üíæ DISASTER RECOVERY & BACKUP

### BACKUP STRATEGY

**RTO (Recovery Time Objective):** 1 hour  
**RPO (Recovery Point Objective):** 15 minutes

1. **Database Backups**
   - Daily full backup (2 AM)
   - Hourly WAL archiving
   - 30-day retention
   - Off-site storage (S3 compatible)

2. **Configuration Backups**
   - docker-compose.yml
   - .env files (encrypted)
   - Application configurations
   - Backup on each deployment

3. **Application Data**
   - Redis persistence (RDB snapshots)
   - Elasticsearch cluster state
   - Log archives

### RESTORE PROCEDURE

1. **Database Restore**
   ```bash
   # 1. Stop all containers
   docker-compose down
   
   # 2. Restore from backup
   psql longin_db < backup.sql
   
   # 3. Verify restoration
   psql longin_db -c "SELECT COUNT(*) FROM users;"
   
   # 4. Restart services
   docker-compose up -d
   ```

2. **Full System Restore**
   - Restore database from backup
   - Restore configurations from Git
   - Rebuild Docker images
   - Deploy containers
   - Run health checks

### REDUNDANCY & HA

1. **Database Replication** (Optional)
   - PostgreSQL streaming replication
   - Hot standby replica
   - Automatic failover (pg_auto_failover)

2. **Redis Replication** (Optional)
   - Redis sentinel for monitoring
   - Automatic failover
   - Master/slave replication

3. **Application Redundancy**
   - Multiple API server instances via Docker Swarm
   - Traefik load balancing
   - No single point of failure

---

## ‚ùì TROUBLESHOOTING & FAQ

### COMMON ISSUES

**Q: "docker: error during connect: This error may also indicate that the Docker daemon is not running."**

A: Start Docker Desktop
```bash
# Windows: Docker Desktop icon in system tray
# Or via PowerShell:
Start-Service com.docker.service
```

**Q: "PostgreSQL: role 'longin_user' does not exist"**

A: Re-initialize database
```bash
docker-compose down -v  # Remove all volumes
docker-compose up postgres
# Wait 30 seconds
docker exec longin-postgres psql -U postgres -f /docker-entrypoint-initdb.d/init-db.sql
```

**Q: "Redis: connection refused (127.0.0.1:6379)"**

A: Check Redis is running
```bash
docker-compose logs redis
docker-compose restart redis
```

**Q: "Traefik: no provider or entrypoint configured"**

A: Check traefik.yml configuration
```bash
docker logs longin-traefik
# Verify dynamic.yml and service labels
```

**Q: "Out of memory: Kill process X (container_name)"**

A: Increase Docker Desktop memory allocation
- Settings ‚Üí Resources ‚Üí Memory: increase to 8GB+
- Or reduce container limits in docker-compose.yml

---

## üìö ADDITIONAL RESOURCES

### EXTERNAL DOCUMENTATION

- **Docker:** https://docs.docker.com
- **PostgreSQL:** https://www.postgresql.org/docs
- **Redis:** https://redis.io/documentation
- **Prometheus:** https://prometheus.io/docs
- **Grafana:** https://grafana.com/docs
- **Elasticsearch:** https://www.elastic.co/guide/en/elasticsearch/reference
- **Traefik:** https://doc.traefik.io
- **Socket.io:** https://socket.io/docs

### COMMUNITY & SUPPORT

- GitHub Issues: https://github.com/longin/longin-hosting/issues
- Docker Community: https://forums.docker.com
- Stack Overflow: tag `[docker]` `[express]` `[postgres]`

---

## üéØ SUCCESS CRITERIA

‚úÖ **Technical**
- All microservices deployed & running
- API endpoints responding <200ms
- Database queries optimized
- 99.5% uptime achieved
- All tests passing

‚úÖ **Functional**
- Users can register & login
- Apps can be started/stopped
- Metrics displayed real-time
- Logs accessible & searchable
- Admin can manage users

‚úÖ **Non-Functional**
- System handles 100 concurrent users
- 50 containers running simultaneously
- Deployments < 2 minutes
- Backup restore < 1 hour
- Security audit passed

---

## üìù VERSION HISTORY

| Verze | Datum | Zmƒõny |
|-------|-------|-------|
| 1.0 | B≈ôezen 2025 | Initial PRD |
| 2.0 | B≈ôezen 2025 | Extended detailed specification |

---

**Datum vytvo≈ôen√≠:** B≈ôezen 2025  
**Posledn√≠ aktualizace:** B≈ôezen 2025  
**Status:** READY FOR DEVELOPMENT  
**Target Audience:** AI Agent, Development Team, DevOps Engineers