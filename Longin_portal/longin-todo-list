# ‚úÖ LONGIN HOSTING - STRUCTURED TODO LIST FOR AI AGENT

**Verze:** 1.0  
**Datum:** B≈ôezen 2025  
**Status:** READY FOR IMPLEMENTATION  
**Target:** AI Agent (Claude/Cursor) - Vibe Coding  
**Chunk Strategy:** Optimized for 512+ token context (segmented tasks)  

---

## üìã OBSAH

1. [√övod & Jak ƒå√≠st Tento Dokument](#√∫vod--jak-ƒç√≠st-tento-dokument)
2. [Phase 1: Foundation ](#phase-1-foundation)
3. [Phase 2: Authentication & Core API ](#phase-2-authentication--core-api)
4. [Phase 3: Docker Integration ](#phase-3-docker-integration)
5. [Phase 4: Real-time & WebSocket ](#phase-4-real-time--websocket)
6. [Phase 5: Frontend ](#phase-5-frontend)
7. [Phase 6: Monitoring & Deployment ](#phase-6-monitoring--deployment)
8. [Configuration & Testing](#configuration--testing)

---

## üéØ √öVOD & JAK ƒå√çST TENTO DOKUMENT

### STRUKTURA KA≈ΩD√â √öLOHY

```
## ‚úÖ TASK ID: [PHASE]-[NUMBER]

**N√°stroje:** Tool 1, Tool 2, Tool 3
**Vstup:** Co mus√≠ existovat p≈ôed touto √∫lohou
**V√Ωstup:** Co bude vytvo≈ôeno
**Priorita:** Critical | High | Medium
**Z√°vislosti:** Kter√Ω task mus√≠ b√Ωt hotov nejd≈ô√≠ve
**Chunk Size:** Velikost pro zpracov√°n√≠ AI (mal√° = l√©pe)

### üìù DETAILN√ç INSTRUKCE

[P≈ôesn√Ω popis co dƒõlat, vƒçetnƒõ:
- Soubory k vytvo≈ôen√≠
- Technologie
- Konkr√©tn√≠ funkcionalita
- P≈ô√≠klady k√≥du
- Testing p≈ô√≠stup]

### ‚ú® TIPS & BEST PRACTICES

- Pokud by nƒõjak√° t≈ô√≠da byla vƒõt≈°√≠ ne≈æ 500 ≈ô√°dk≈Ø refakturuj ji na men≈°√≠ logick√© d√≠ly
- Po dokonƒçen√≠ ka≈æd√©ho kroku z pl√°nu vytvo≈ô commit s popisem co se zmƒõnilo.

### ƒåTEN√ç TOHOTO DOKUMENTU

**Pokud jsi AI agent (Claude/Cursor):**
1. P≈ôeƒçti si √∫vod phase
2. Vezmi si ONE task (ne v√≠ce!)
3. P≈ôeƒçti si detailn√≠ instrukce
4. Implementuj dle specifikace
5. Testuj dle "Testing p≈ô√≠stupu"
6. Vr√°tit se k dokumentu, ber si DAL≈†√ç task
7. Pokud task z√°vis√≠ na jin√©m ‚Üí Dƒõlej nejd≈ô√≠ve ten

**Pokud jsi developer:**
1. P≈ôeƒçti si Phase Overview
2. Dƒõl tasks sekvenƒçnƒõ (1, 2, 3...)
3. Nebo paralelnƒõ (ale dodr≈æuj Dependencies!)
4. Markuj tasks jako Done ‚úÖ a≈æ kdy≈æ je hotovo a √∫spƒõ≈°nƒõ otestovan√©
5. Opravuj bugs & blockers
6. Neupravovat ani nezjednodu≈°uj existuj√≠c√≠ k√≥d ani n√°vaznou funkci toho co upravuje≈° nebo roz≈°i≈ôuje≈°
7. Pokud bude provedena zmƒõna nebo roz≈°√≠≈ôen√≠ v zad√°n√≠ u≈æivatelem, tak jako prvn√≠ aktualizuj pl√°n a n√°slednƒõ aktualizuj k√≥d podle nov√©ho zad√°n√≠.

### COLOR CODING

- üî¥ **Red** = Mus√≠ b√Ωt hotov nejd≈ô√≠ve (Tier 0)
- üü† **Orange** = Vysok√° priorita (Tier 1)
- üü° **Yellow** = St≈ôedn√≠ (Tier 2)
- üü¢ **Green** = Low priority (Tier 3)

---

## üèóÔ∏è PHASE 1: FOUNDATION (2-3 t√Ωdny)

### PHASE OVERVIEW

Vytvo≈ôen√≠ kompletn√≠ project struktury, konfigurace a setup tool≈Ø. Po skonƒçen√≠ t√©to f√°ze:
- ‚úÖ Project je na GitHub
- ‚úÖ V≈°echny tools (pnpm, TypeScript, ESLint) nakonfigurovan√Ω
- ‚úÖ Dev prost≈ôed√≠ funguje
- ‚úÖ CI/CD pipeline je nastaven√Ω
- ‚úÖ Docker & Docker Compose bƒõ≈æ√≠

---

## üî¥ TASK 1.1: Project Initialization & Monorepo Setup

**N√°stroje:** pnpm, TypeScript, Node.js 20  
**Vstup:** Existuje GitHub repo (empty)  
**V√Ωstup:** Complete project structure s workspace konfigurac√≠  
**Doba:** 4-6 hodin  
**Priorita:** üî¥ CRITICAL  
**Z√°vislosti:** None (starting task)  
**Chunk Size:** LARGE (single comprehensive task)  

### üìù DETAILN√ç INSTRUKCE

**Co dƒõlat:**

1. **Vytvo≈ô root package.json**
   - Nastavit pnpm workspaces
   - Add scripts: `"dev"`, `"build"`, `"test"`, `"lint"`, `"format"`
   - Add devDependencies: TypeScript, ESLint, Prettier, tsconfig-paths
   - Reference: longin-config-files.md (pnpm-workspace.yaml)

2. **Vytvo≈ô root tsconfig.json**
   - Strict mode: true
   - Path aliases: @core/*, @ui/*, @shared/*
   - Reference: longin-config-files.md (tsconfig.json root)

3. **Vytvo≈ô ESLint & Prettier config**
   - .eslintrc.json
   - .prettierrc.json
   - Reference: longin-config-files.md

4. **Vytvo≈ô directory struktura**
   ```
   longin-hosting-server/
   ‚îú‚îÄ‚îÄ services/longin-core/
   ‚îú‚îÄ‚îÄ services/longin-ui/
   ‚îú‚îÄ‚îÄ services/database/
   ‚îú‚îÄ‚îÄ config/
   ‚îú‚îÄ‚îÄ scripts/
   ‚îú‚îÄ‚îÄ docs/
   ‚îî‚îÄ‚îÄ tests/
   ```

5. **Setup .env.example**
   - Copy z longin-config-files.md
   - Vytvo≈ôit V≈†ECHNY environment variables
   - P≈ôidat detailn√≠ comments

6. **Setup docker-compose.yml (basic)**
   - Placeholder services (bez content≈Ø)
   - Will be expanded in later tasks

7. **Setup GitHub Actions workflows**
   - .github/workflows/build.yml
   - .github/workflows/test.yml
   - .github/workflows/lint.yml

8. **Vytvo≈ô README.md (root)**
   - Project description
   - Quick start guide
   - System requirements
   - Workspace structure explanation

### ‚ú® TIPS & BEST PRACTICES

- Pou≈æij `pnpm` (ne npm/yarn) - lep≈°√≠ monorepo support
- TypeScript strict mode = l√©pe pozdƒõji
- ESLint configuration = prevent bugs before code review
- GitHub Actions = automation = time savings

### üìã TESTING P≈ò√çSTUP

```bash
# Verify structure
ls -la services/
ls -la config/

# Verify config files
cat .eslintrc.json  # Should parse as JSON
cat .prettierrc.json  # Should parse as JSON

# Verify package.json
cat package.json  # Should have workspaces array

# Verify tsconfig paths
grep -A5 "paths" tsconfig.json  # Should show @core/*, @ui/*, @shared/*
```

### ‚úÖ CHECKLIST

- [ ] Root package.json created with workspaces
- [ ] pnpm-workspace.yaml created
- [ ] Root tsconfig.json with path aliases
- [ ] .eslintrc.json created
- [ ] .prettierrc.json created
- [ ] .env.example created with ALL variables
- [ ] docker-compose.yml skeleton created
- [ ] GitHub Actions workflows created
- [ ] .gitignore & .dockerignore created
- [ ] README.md created
- [ ] All config files validate (no syntax errors)

---

## üü† TASK 1.2: Backend Service Setup (longin-core)

**N√°stroje:** Express, TypeScript, TypeORM  
**Vstup:** Project structure z Task 1.1  
**V√Ωstup:** Ready-to-code backend service folder   
**Priorita:** üü† HIGH  
**Z√°vislosti:** TASK 1.1  
**Chunk Size:** LARGE  

### üìù DETAILN√ç INSTRUKCE

1. **Vytvo≈ô services/longin-core/package.json**
   ```json
   {
     "name": "longin-core",
     "version": "1.0.0",
     "type": "module",
     "scripts": {
       "dev": "ts-node-dev --respawn --transpile-only src/app.ts",
       "build": "tsc",
       "start": "node dist/app.js",
       "test": "jest",
       "lint": "eslint src tests",
       "format": "prettier --write \"src/**/*.ts\""
     },
     "dependencies": {
       "express": "^4.18.2",
       "typeorm": "^0.3.17",
       "pg": "^8.11.0",
       "ioredis": "^5.3.2",
       "socket.io": "^4.7.0",
       "jwt-simple": "^0.5.6",
       "bcryptjs": "^2.4.3",
       "class-validator": "^0.14.0",
       "class-transformer": "^0.5.1",
       "winston": "^3.11.0",
       "dotenv": "^16.3.1",
       "helmet": "^7.1.0",
       "cors": "^2.8.5",
       "dockerode": "^4.0.0",
       "axios": "^1.6.2"
     },
     "devDependencies": {
       "typescript": "^5.3.0",
       "@types/node": "^20.10.0",
       "@types/express": "^4.17.21",
       "@typescript-eslint/eslint-plugin": "^6.13.0",
       "@typescript-eslint/parser": "^6.13.0",
       "eslint": "^8.54.0",
       "prettier": "^3.1.0",
       "ts-node": "^10.9.0",
       "ts-node-dev": "^2.0.0",
       "jest": "^29.7.0",
       "@types/jest": "^29.5.8",
       "ts-jest": "^29.1.1",
       "supertest": "^6.3.3",
       "@types/supertest": "^6.0.2",
       "nodemon": "^3.0.2"
     }
   }
   ```

2. **Vytvo≈ô services/longin-core/tsconfig.json**
   ```json
   {
     "extends": "../../tsconfig.json",
     "compilerOptions": {
       "outDir": "./dist",
       "rootDir": "./src"
     },
     "include": ["src"],
     "exclude": ["node_modules", "tests"]
   }
   ```

3. **Vytvo≈ô folder struktura**
   ```
   services/longin-core/
   ‚îú‚îÄ‚îÄ src/
   ‚îÇ   ‚îú‚îÄ‚îÄ config/
   ‚îÇ   ‚îú‚îÄ‚îÄ middleware/
   ‚îÇ   ‚îú‚îÄ‚îÄ routes/
   ‚îÇ   ‚îú‚îÄ‚îÄ services/
   ‚îÇ   ‚îú‚îÄ‚îÄ websocket/
   ‚îÇ   ‚îú‚îÄ‚îÄ utils/
   ‚îÇ   ‚îú‚îÄ‚îÄ entities/
   ‚îÇ   ‚îú‚îÄ‚îÄ dtos/
   ‚îÇ   ‚îî‚îÄ‚îÄ app.ts
   ‚îú‚îÄ‚îÄ tests/
   ‚îú‚îÄ‚îÄ Dockerfile
   ‚îú‚îÄ‚îÄ .dockerignore
   ‚îú‚îÄ‚îÄ jest.config.js
   ‚îî‚îÄ‚îÄ README.md
   ```

4. **Vytvo≈ô basic src/app.ts**
   ```typescript
   import express from 'express';
   import helmet from 'helmet';
   import cors from 'cors';
   
   const app = express();
   const PORT = process.env.LONGIN_CORE_API_PORT || 3001;
   
   // Middleware
   app.use(helmet());
   app.use(cors());
   app.use(express.json());
   
   // Health check
   app.get('/health', (req, res) => {
     res.json({ status: 'ok', timestamp: new Date() });
   });
   
   // Error handler (placeholder)
   app.use((err, req, res, next) => {
     console.error(err);
     res.status(500).json({ error: 'Internal server error' });
   });
   
   app.listen(PORT, () => {
     console.log(`‚úÖ API Server running on port ${PORT}`);
   });
   ```

5. **Vytvo≈ô Dockerfile**
   ```dockerfile
   FROM node:20-alpine AS base
   RUN npm install -g pnpm
   WORKDIR /app
   
   FROM base AS dependencies
   COPY pnpm-lock.yaml pnpm-workspace.yaml package.json ./
   COPY services/longin-core/package.json services/longin-core/
   RUN pnpm install --frozen-lockfile
   
   FROM base AS development
   COPY --from=dependencies /app/node_modules ./node_modules
   COPY . .
   EXPOSE 3001 3002
   CMD ["pnpm", "--filter", "longin-core", "dev"]
   
   FROM base AS production
   COPY --from=dependencies /app/node_modules ./node_modules
   COPY . .
   RUN pnpm --filter longin-core build
   EXPOSE 3001 3002
   CMD ["node", "services/longin-core/dist/app.js"]
   ```

6. **Vytvo≈ô jest.config.js**
   ```javascript
   module.exports = {
     preset: 'ts-jest',
     testEnvironment: 'node',
     roots: ['<rootDir>/src', '<rootDir>/tests'],
     testMatch: ['**/__tests__/**/*.ts', '**/?(*.)+(spec|test).ts'],
     moduleFileExtensions: ['ts', 'js', 'json'],
   };
   ```

### ‚úÖ CHECKLIST

- [ ] services/longin-core/package.json created
- [ ] services/longin-core/tsconfig.json created
- [ ] Folder struktura vytvo≈ôena
- [ ] src/app.ts basic server exists
- [ ] Dockerfile created
- [ ] jest.config.js created
- [ ] README.md created
- [ ] All dependencies listed in package.json

---

## üü† TASK 1.3: Frontend Service Setup (longin-ui)

**N√°stroje:** React 18, Vite, TypeScript, Tailwind CSS  
**Vstup:** Project structure z Task 1.1  
**V√Ωstup:** Ready-to-code React service folder   
**Priorita:** üü† HIGH  
**Z√°vislosti:** TASK 1.1  
**Chunk Size:** LARGE  

### üìù DETAILN√ç INSTRUKCE

1. **Vytvo≈ô services/longin-ui/package.json**
   ```json
   {
     "name": "longin-ui",
     "version": "1.0.0",
     "type": "module",
     "scripts": {
       "dev": "vite",
       "build": "tsc && vite build",
       "preview": "vite preview",
       "test": "vitest",
       "lint": "eslint src",
       "format": "prettier --write \"src/**/*.{ts,tsx}\""
     },
     "dependencies": {
       "react": "^18.2.0",
       "react-dom": "^18.2.0",
       "react-router-dom": "^6.20.0",
       "axios": "^1.6.2",
       "socket.io-client": "^4.7.0",
       "@reduxjs/toolkit": "^1.9.7",
       "react-redux": "^8.1.3",
       "@tanstack/react-query": "^5.25.0",
       "tailwindcss": "^3.3.6",
       "recharts": "^2.10.3",
       "classnames": "^2.3.2"
     },
     "devDependencies": {
       "typescript": "^5.3.0",
       "@types/react": "^18.2.37",
       "@types/react-dom": "^18.2.15",
       "@vitejs/plugin-react": "^4.2.0",
       "vite": "^5.0.7",
       "@tailwindcss/typography": "^0.5.10",
       "autoprefixer": "^10.4.16",
       "postcss": "^8.4.31",
       "vitest": "^1.0.4",
       "@testing-library/react": "^14.1.2",
       "@testing-library/jest-dom": "^6.1.5",
       "prettier": "^3.1.0",
       "eslint": "^8.54.0"
     }
   }
   ```

2. **Vytvo≈ô services/longin-ui/vite.config.ts**
   ```typescript
   import { defineConfig } from 'vite';
   import react from '@vitejs/plugin-react';
   
   export default defineConfig({
     plugins: [react()],
     server: {
       port: 3000,
       strictPort: false,
       proxy: {
         '/api': {
           target: 'http://localhost:3001',
           changeOrigin: true,
         },
       },
     },
     build: {
       outDir: 'dist',
       sourcemap: true,
     },
   });
   ```

3. **Vytvo≈ô folder struktura**
   ```
   services/longin-ui/
   ‚îú‚îÄ‚îÄ src/
   ‚îÇ   ‚îú‚îÄ‚îÄ pages/
   ‚îÇ   ‚îú‚îÄ‚îÄ components/
   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/
   ‚îÇ   ‚îú‚îÄ‚îÄ services/
   ‚îÇ   ‚îú‚îÄ‚îÄ store/
   ‚îÇ   ‚îú‚îÄ‚îÄ utils/
   ‚îÇ   ‚îú‚îÄ‚îÄ types/
   ‚îÇ   ‚îú‚îÄ‚îÄ styles/
   ‚îÇ   ‚îî‚îÄ‚îÄ App.tsx
   ‚îú‚îÄ‚îÄ public/
   ‚îú‚îÄ‚îÄ tests/
   ‚îú‚îÄ‚îÄ Dockerfile
   ‚îú‚îÄ‚îÄ .dockerignore
   ‚îú‚îÄ‚îÄ tailwind.config.js
   ‚îú‚îÄ‚îÄ tsconfig.json
   ‚îî‚îÄ‚îÄ README.md
   ```

4. **Vytvo≈ô tailwind.config.js**
   ```javascript
   export default {
     content: ['./index.html', './src/**/*.{js,ts,jsx,tsx}'],
     theme: {
       extend: {
         colors: {
           dark: '#1a1a2e',
           darker: '#16213e',
           accent: '#00d4ff',
         },
       },
     },
     plugins: [],
   };
   ```

5. **Vytvo≈ô src/App.tsx**
   ```typescript
   import React from 'react';
   
   const App: React.FC = () => {
     return (
       <div className="min-h-screen bg-dark text-white">
         <h1 className="text-4xl font-bold">Longin Hosting</h1>
         <p>Welcome to Longin Hosting Server</p>
       </div>
     );
   };
   
   export default App;
   ```

6. **Vytvo≈ô public/index.html**
   ```html
   <!DOCTYPE html>
   <html lang="en">
   <head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Longin Hosting</title>
   </head>
   <body>
     <div id="root"></div>
     <script type="module" src="/src/main.tsx"></script>
   </body>
   </html>
   ```

7. **Vytvo≈ô Dockerfile**
   ```dockerfile
   FROM node:20-alpine AS base
   RUN npm install -g pnpm
   WORKDIR /app
   
   FROM base AS development
   COPY pnpm-lock.yaml pnpm-workspace.yaml package.json ./
   COPY services/longin-ui/package.json services/longin-ui/
   RUN pnpm install
   COPY . .
   EXPOSE 3000
   CMD ["pnpm", "--filter", "longin-ui", "dev"]
   
   FROM base AS builder
   COPY pnpm-lock.yaml pnpm-workspace.yaml package.json ./
   COPY services/longin-ui/package.json services/longin-ui/
   RUN pnpm install --frozen-lockfile
   COPY . .
   RUN pnpm --filter longin-ui build
   
   FROM nginx:alpine
   COPY --from=builder /app/services/longin-ui/dist /usr/share/nginx/html
   EXPOSE 80
   CMD ["nginx", "-g", "daemon off;"]
   ```

### ‚úÖ CHECKLIST

- [ ] services/longin-ui/package.json created
- [ ] vite.config.ts created with proxy setup
- [ ] tailwind.config.js created
- [ ] Folder struktura vytvo≈ôena
- [ ] src/App.tsx with basic content
- [ ] public/index.html created
- [ ] Dockerfile created (dev + production)
- [ ] README.md created
- [ ] All dependencies listed

---

## üü† TASK 1.4: Database Service Setup

**N√°stroje:** PostgreSQL, TypeORM migrations  
**Vstup:** Project structure  
**V√Ωstup:** Database folder se schema template  
**Doba:** 2-3 hodin  
**Priorita:** üü† HIGH  
**Z√°vislosti:** TASK 1.1  
**Chunk Size:** MEDIUM  

### üìù DETAILN√ç INSTRUKCE

1. **Vytvo≈ô services/database/ folder struktura**
   ```
   services/database/
   ‚îú‚îÄ‚îÄ init-db.sql           # Main schema creation
   ‚îú‚îÄ‚îÄ pgvector-init.sql     # PgVector extension setup
   ‚îú‚îÄ‚îÄ migrations/           # TypeORM migrations folder
   ‚îÇ   ‚îî‚îÄ‚îÄ .keep            # Placeholder
   ‚îú‚îÄ‚îÄ seeds/                # Database seeding
   ‚îÇ   ‚îî‚îÄ‚îÄ .keep
   ‚îî‚îÄ‚îÄ README.md
   ```

2. **Vytvo≈ô services/database/init-db.sql** (Template s placeholder)
   ```sql
   -- Create extensions
   CREATE EXTENSION IF NOT EXISTS uuid-ossp;
   CREATE EXTENSION IF NOT EXISTS pgcrypto;
   
   -- Create users table
   CREATE TABLE users (
     id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
     username VARCHAR(255) UNIQUE NOT NULL,
     email VARCHAR(255) UNIQUE NOT NULL,
     password_hash VARCHAR(255) NOT NULL,
     role VARCHAR(50) NOT NULL DEFAULT 'user',
     is_active BOOLEAN DEFAULT true,
     created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
     updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
     last_login TIMESTAMP,
     theme VARCHAR(50) DEFAULT 'dark',
     notifications_enabled BOOLEAN DEFAULT true,
     INDEX idx_username (username),
     INDEX idx_email (email),
     INDEX idx_role (role)
   );
   
   -- Add more tables...
   -- (Will be expanded in Phase 2)
   
   -- Create initial admin user (optional)
   INSERT INTO users (username, email, password_hash, role)
   VALUES ('admin', 'admin@longin.local', 'TO_BE_HASHED', 'admin')
   ON CONFLICT (username) DO NOTHING;
   ```

3. **Vytvo≈ô services/database/pgvector-init.sql**
   ```sql
   CREATE EXTENSION IF NOT EXISTS vector;
   
   -- Create vector storage table (for future AI features)
   CREATE TABLE IF NOT EXISTS embeddings (
     id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
     entity_type VARCHAR(50),
     entity_id UUID,
     embedding vector(1536),
     created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
   );
   
   CREATE INDEX ON embeddings USING ivfflat (embedding vector_cosine_ops)
     WITH (lists = 100);
   ```

### ‚úÖ CHECKLIST

- [ ] services/database/ folder created
- [ ] init-db.sql template created
- [ ] pgvector-init.sql created
- [ ] migrations/ folder created
- [ ] README.md created

---

## üü† TASK 1.5: Docker Compose Development Setup

**N√°stroje:** Docker, Docker Compose  
**Vstup:** All service folders from Tasks 1.1-1.4  
**V√Ωstup:** Working docker-compose.yml pro development   
**Priorita:** üü† HIGH  
**Z√°vislosti:** TASK 1.1, 1.2, 1.3, 1.4  
**Chunk Size:** LARGE  

### üìù DETAILN√ç INSTRUKCE

1. **Use docker-compose.yml from longin-config-files.md**
2. **Update port references** based on .env.example
3. **Add health checks** for all services
4. **Test each service** can start without errors
5. **Add volume mounts** for development hot-reload
6. **Document all services** in docker-compose comments

### ‚úÖ CHECKLIST

- [ ] docker-compose.yml complete
- [ ] All services have proper environment variables
- [ ] All services have health checks
- [ ] Volume mounts configured for development
- [ ] Networks configured properly
- [ ] docker-compose up -d works without errors

---

## üü° TASK 1.6: GitHub Actions CI/CD Setup

**N√°stroje:** GitHub Actions  
**Vstup:** Project on GitHub  
**V√Ωstup:** Working CI/CD workflows  
**Priorita:** üü° MEDIUM  
**Z√°vislosti:** TASK 1.1  
**Chunk Size:** MEDIUM  

### üìù DETAILN√ç INSTRUKCE

1. **Create .github/workflows/build.yml**
   - Trigger on push to main & PRs
   - Build Docker images for longin-core & longin-ui
   - Push to registry (optional)
   - Run health check

2. **Create .github/workflows/test.yml**
   - Run Jest unit tests
   - Run Supertest API tests
   - Generate coverage report
   - Check coverage threshold (>80%)

3. **Create .github/workflows/lint.yml**
   - Run ESLint
   - Run Prettier check
   - Run TypeScript type check
   - Report any violations

### ‚úÖ CHECKLIST

- [ ] .github/workflows/build.yml created
- [ ] .github/workflows/test.yml created
- [ ] .github/workflows/lint.yml created
- [ ] All workflows have proper triggers
- [ ] All workflows have proper error handling

---

## üìä PHASE 2: AUTHENTICATION & CORE API (2-3 t√Ωdny)

### PHASE OVERVIEW

Implementace user authentication, JWT tokens, a REST API. Po skonƒçen√≠:
- ‚úÖ User registration & login working
- ‚úÖ JWT token generation & validation
- ‚úÖ Password hashing (bcryptjs)
- ‚úÖ Basic REST API struktura
- ‚úÖ Comprehensive tests

**Pou≈æij:** Prompt 3 z longin-ai-prompts.md

---

## üî¥ TASK 2.1: Database Schema Complete Implementation

**N√°stroje:** PostgreSQL, TypeORM entities  
**Vstup:** init-db.sql template z Task 1.4  
**V√Ωstup:** Complete database schema + TypeORM entities  
**Doba:** 6-8 hodin  
**Priorita:** üî¥ CRITICAL  
**Z√°vislosti:** TASK 1.4  
**Chunk Size:** EXTRA LARGE (split into sub-tasks if needed)  

### üìù DETAILN√ç INSTRUKCE

**Reference:** PRD Database Schema Section

Create complete SQL schema with all 7 tables:
1. users
2. applications
3. containers
4. deployments
5. metrics
6. github_webhooks
7. api_logs

Plus TypeORM entities for each.

**See:** longin-ai-prompts.md PROMPT 2 for exact specifications

### ‚úÖ CHECKLIST

- [ ] All 7 tables created in init-db.sql
- [ ] All indexes created
- [ ] All foreign keys with ON DELETE CASCADE
- [ ] All TypeORM entities created (.ts files)
- [ ] TypeORM migration system configured
- [ ] Database can be initialized without errors

---

## üî¥ TASK 2.2: Redis Configuration & Utilities

**N√°stroje:** Redis, ioredis  
**Vstup:** src/config folder structure  
**V√Ωstup:** Redis connection & helper functions  
**Doba:** 3-4 hodin  
**Priorita:** üî¥ CRITICAL  
**Z√°vislosti:** TASK 1.2  
**Chunk Size:** MEDIUM  

### üìù DETAILN√ç INSTRUKCE

1. **Create src/config/redis.ts**
   - Redis client setup using ioredis
   - Connection pooling
   - Error handling & logging
   - Reconnection logic
   - Health check function

2. **Create src/utils/redis.ts** (helper functions)
   - getSession(sessionId)
   - setSession(sessionId, data)
   - invalidateCache(key)
   - publishEvent(channel, data)
   - subscribeToChannel(channel, handler)

3. **Integrate with docker-compose.yml**
   - Verify Redis service is running
   - Test connection with health check

### ‚úÖ CHECKLIST

- [ ] src/config/redis.ts created
- [ ] src/utils/redis.ts created
- [ ] Health check working
- [ ] Connection pooling configured
- [ ] Error handling comprehensive
- [ ] Unit tests created

---

## üî¥ TASK 2.3: Authentication Service & Utilities

**N√°stroje:** JWT, bcryptjs, TypeORM  
**Vstup:** src/services folder + entities  
**V√Ωstup:** Complete auth service + helpers  
**Doba:** 8-10 hodin  
**Priorita:** üî¥ CRITICAL  
**Z√°vislosti:** TASK 2.1, 2.2  
**Chunk Size:** EXTRA LARGE  

### üìù DETAILN√ç INSTRUKCE

1. **Create src/utils/jwt.ts**
   - generateAccessToken(userId, role)
   - generateRefreshToken(userId)
   - verifyAccessToken(token)
   - verifyRefreshToken(token)
   - decodeToken(token)

2. **Create src/utils/password.ts**
   - hashPassword(plaintext)
   - comparePassword(plaintext, hash)
   - validatePasswordStrength(password)

3. **Create src/services/auth.service.ts**
   - register(registerDto)
   - login(loginDto)
   - refreshToken(refreshToken)
   - logout(userId)
   - validateUser(username, password)
   - getMe(userId)

4. **Create src/dtos/**
   - auth.dto.ts (RegisterDto, LoginDto, RefreshTokenDto)
   - response.dto.ts (ApiResponse, UserDto, TokenDto)
   - Validators using class-validator

5. **Create comprehensive tests**
   - tests/auth.service.test.ts
   - tests/auth.utils.test.ts

**See:** longin-ai-prompts.md PROMPT 3 for exact specifications

### ‚úÖ CHECKLIST

- [ ] All JWT utilities created
- [ ] All password utilities created
- [ ] Auth service with all methods
- [ ] All DTOs with validators
- [ ] Comprehensive unit tests
- [ ] All tests passing

---

## üü† TASK 2.4: Middleware Stack Implementation

**N√°stroje:** Express middleware, TypeScript  
**Vstup:** src/middleware folder structure  
**V√Ωstup:** Complete middleware suite  
**Doba:** 6-8 hodin  
**Priorita:** üü† HIGH  
**Z√°vislosti:** TASK 2.3  
**Chunk Size:** LARGE  

### üìù DETAILN√ç INSTRUKCE

Create 6 middleware files:

1. **src/middleware/auth.middleware.ts**
   - Extract JWT from headers
   - Validate & verify signature
   - Attach user to request
   - Return 401 if invalid

2. **src/middleware/auth-guard.middleware.ts**
   - Check user.role against required role
   - Check resource ownership
   - Return 403 if unauthorized

3. **src/middleware/validation.middleware.ts**
   - Validate request body using class-validator
   - Return 400 with errors
   - Support nested objects

4. **src/middleware/error-handler.middleware.ts**
   - Catch all errors
   - Log with Winston
   - Return consistent error response

5. **src/middleware/logging.middleware.ts**
   - Log all requests (method, path, status, duration)
   - Store in PostgreSQL api_logs table

6. **src/middleware/rate-limit.middleware.ts**
   - Per IP: 100 req/min
   - Per user: 1000 req/hour
   - Return 429 if exceeded

All with comprehensive error handling & tests.

### ‚úÖ CHECKLIST

- [ ] All 6 middleware created
- [ ] Error responses consistent format
- [ ] All logging working
- [ ] Rate limiting working
- [ ] Comprehensive unit tests
- [ ] All tests passing

---

## üü† TASK 2.5: Auth Routes & Endpoints

**N√°stroje:** Express routes, API testing  
**Vstup:** src/routes folder + auth.service  
**V√Ωstup:** 5 working authentication endpoints  
**Doba:** 4-6 hodin  
**Priorita:** üü† HIGH  
**Z√°vislosti:** TASK 2.3, 2.4  
**Chunk Size:** LARGE  

### üìù DETAILN√ç INSTRUKCE

Create 5 endpoints:

1. **POST /api/auth/register**
   - Validate input (username, email, password, confirmPassword)
   - Hash password
   - Create user in DB
   - Generate & return tokens
   - Return 201 Created

2. **POST /api/auth/login**
   - Validate credentials
   - Generate tokens
   - Store refresh token in Redis
   - Return 200 OK

3. **POST /api/auth/refresh**
   - Validate refresh token
   - Generate new access token
   - Return 200 OK

4. **POST /api/auth/logout**
   - Invalidate refresh token
   - Return 200 OK

5. **GET /api/auth/me**
   - Requires auth
   - Return current user info
   - Return 200 OK

Plus:
- **GET /health** (no auth)
- **GET /api/system/status** (admin only)

Create comprehensive integration tests with Supertest.

### ‚úÖ CHECKLIST

- [ ] All 5 auth endpoints working
- [ ] All validation working
- [ ] Error handling correct
- [ ] Integration tests passing
- [ ] Postman/Insomnia collection created

---

## üü† TASK 2.6: App Express Server Setup

**N√°stroje:** Express, middleware stack  
**Vstup:** All middleware + routes from Tasks 2.4-2.5  
**V√Ωstup:** Production-ready Express app  
**Doba:** 3-4 hodin  
**Priorita:** üü† HIGH  
**Z√°vislo≈õci:** TASK 2.4, 2.5  
**Chunk Size:** MEDIUM  

### üìù DETAILN√ç INSTRUKCE

Update src/app.ts:

1. **Import all middleware**
2. **Apply middleware stack in correct order**
   - Security (helmet, cors)
   - Logging
   - Body parsing
   - Authentication
   - Validation
   - Routes
   - Error handler (last!)
3. **Register all routes**
4. **Start server on correct port**
5. **Log startup message**

Ensure app:
- Starts without errors
- Responds to /health
- Applies middleware in correct order
- Returns proper error responses

### ‚úÖ CHECKLIST

- [ ] src/app.ts complete
- [ ] All middleware applied
- [ ] All routes registered
- [ ] Server starts successfully
- [ ] /health endpoint working
- [ ] Proper error handling

---

## üî¥ PHASE 2 COMPLETION

After Task 2.6, you should be able to:

```bash
# Start backend
pnpm --filter longin-core dev

# Test endpoints
curl http://localhost:3001/health  # ‚úÖ Should return OK
curl -X POST http://localhost:3001/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{"username":"test","email":"test@example.com","password":"Test123!@"}'  # ‚úÖ Should register

curl -X GET http://localhost:3001/api/auth/me \
  -H "Authorization: Bearer {token}"  # ‚úÖ Should return user

# Backend is ready for Phase 3
```

---

## üê≥ PHASE 3: DOCKER INTEGRATION (2 t√Ωdny)

### PHASE OVERVIEW

Integrace Docker SDK, spr√°va kontejner≈Ø, app lifecycle management.

**Use:** Prompt 4 z longin-ai-prompts.md

Key tasks:
- Docker SDK wrapper (dockerode)
- Container creation/start/stop
- Port allocation
- App instance limiting
- Container status tracking
- Integration tests

[DUE TO LENGTH - Abbreviated for space, but same structure as Phase 2 tasks]

---

## üîå PHASE 4: REAL-TIME & WEBSOCKET (2 t√Ωdny)

### PHASE OVERVIEW

Socket.io setup, real-time metrics broadcasting, log streaming.

**Use:** Prompt 5 z longin-ai-prompts.md

Key tasks:
- Socket.io server setup
- Authenticated connections
- Event namespaces
- Metric broadcasting
- Log streaming

---

## üé® PHASE 5: FRONTEND (3-4 t√Ωdny)

### PHASE OVERVIEW

React UI, components, API integration, state management.

**Use:** Prompt 6 z longin-ai-prompts.md

Can run PARALLEL with Phases 3-4.

Key tasks:
- Login/Register pages
- Dashboard
- App browser & detail pages
- Admin panel
- Socket.io integration
- Redux store
- Tailwind styling

---

## üìä PHASE 6: MONITORING & DEPLOYMENT (3 t√Ωdny)

### PHASE OVERVIEW

Prometheus metrics, Grafana dashboards, ELK logging, Traefik proxy, production deployment.

**Use:** Prompt 7 z longin-ai-prompts.md

Key tasks:
- Prometheus setup & scrape config
- Grafana dashboards
- ELK stack (Elasticsearch, Logstash, Kibana)
- Traefik configuration
- Docker Swarm setup (optional)
- Health checks & alerting

---

## ‚úÖ TESTING & QUALITY ASSURANCE

### UNIT TESTING

**Per service requirement:**
- Backend: Jest 80%+ coverage
- Frontend: Vitest 70%+ coverage

Run:
```bash
pnpm test:coverage
```

### INTEGRATION TESTING

**API Integration (Supertest):**
- All endpoints have integration tests
- Test success & error cases
- Test middleware chain

**E2E Testing (Cypress - optional):**
- User registration flow
- Login flow
- App launch flow
- Monitoring views

### LOAD TESTING

**Optional - Phase 7:**
- k6 or Apache JMeter
- Test 100 concurrent users
- Measure response times
- Identify bottlenecks

---

## üéâ PROJECT COMPLETION CHECKLIST

- [ ] Phase 1: Foundation ‚úÖ
- [ ] Phase 2: Auth & API ‚úÖ
- [ ] Phase 3: Docker Integration ‚úÖ
- [ ] Phase 4: Real-time ‚úÖ
- [ ] Phase 5: Frontend ‚úÖ
- [ ] Phase 6: Monitoring ‚úÖ
- [ ] All tests passing ‚úÖ
- [ ] Documentation complete ‚úÖ
- [ ] Security audit passed ‚úÖ
- [ ] Production deployment ready ‚úÖ

---

**Document Version:** 1.0  
**Last Updated:** B≈ôezen 2025  
**Status:** READY FOR AI AGENT IMPLEMENTATION